var CryptoJS=CryptoJS||function(t,e){var n={},a=n.lib={},i=function(){},r=a.Base={extend:function(t){i.prototype=this;var e=new i;return t&&e.mixIn(t),e.hasOwnProperty("init")||(e.init=function(){e.$super.init.apply(this,arguments)}),e.init.prototype=e,e.$super=this,e},create:function(){var t=this.extend();return t.init.apply(t,arguments),t},init:function(){},mixIn:function(t){for(var e in t)t.hasOwnProperty(e)&&(this[e]=t[e]);t.hasOwnProperty("toString")&&(this.toString=t.toString)},clone:function(){return this.init.prototype.extend(this)}},s=a.WordArray=r.extend({init:function(t,e){t=this.words=t||[],this.sigBytes=void 0!=e?e:4*t.length},toString:function(t){return(t||l).stringify(this)},concat:function(t){var e=this.words,n=t.words,a=this.sigBytes;if(t=t.sigBytes,this.clamp(),a%4)for(var i=0;i<t;i++)e[a+i>>>2]|=(n[i>>>2]>>>24-i%4*8&255)<<24-(a+i)%4*8;else if(65535<n.length)for(i=0;i<t;i+=4)e[a+i>>>2]=n[i>>>2];else e.push.apply(e,n);return this.sigBytes+=t,this},clamp:function(){var e=this.words,n=this.sigBytes;e[n>>>2]&=4294967295<<32-n%4*8,e.length=t.ceil(n/4)},clone:function(){var t=r.clone.call(this);return t.words=this.words.slice(0),t},random:function(e){for(var n=[],a=0;a<e;a+=4)n.push(4294967296*t.random()|0);return new s.init(n,e)}}),o=n.enc={},l=o.Hex={stringify:function(t){var e=t.words;t=t.sigBytes;for(var n=[],a=0;a<t;a++){var i=e[a>>>2]>>>24-a%4*8&255;n.push((i>>>4).toString(16)),n.push((15&i).toString(16))}return n.join("")},parse:function(t){for(var e=t.length,n=[],a=0;a<e;a+=2)n[a>>>3]|=parseInt(t.substr(a,2),16)<<24-a%8*4;return new s.init(n,e/2)}},c=o.Latin1={stringify:function(t){var e=t.words;t=t.sigBytes;for(var n=[],a=0;a<t;a++)n.push(String.fromCharCode(e[a>>>2]>>>24-a%4*8&255));return n.join("")},parse:function(t){for(var e=t.length,n=[],a=0;a<e;a++)n[a>>>2]|=(255&t.charCodeAt(a))<<24-a%4*8;return new s.init(n,e)}},d=o.Utf8={stringify:function(t){try{return decodeURIComponent(escape(c.stringify(t)))}catch(t){throw Error("Malformed UTF-8 data")}},parse:function(t){return c.parse(unescape(encodeURIComponent(t)))}},u=a.BufferedBlockAlgorithm=r.extend({reset:function(){this._data=new s.init,this._nDataBytes=0},_append:function(t){"string"==typeof t&&(t=d.parse(t)),this._data.concat(t),this._nDataBytes+=t.sigBytes},_process:function(e){var n=this._data,a=n.words,i=n.sigBytes,r=this.blockSize,o=i/(4*r);if(e=(o=e?t.ceil(o):t.max((0|o)-this._minBufferSize,0))*r,i=t.min(4*e,i),e){for(var l=0;l<e;l+=r)this._doProcessBlock(a,l);l=a.splice(0,e),n.sigBytes-=i}return new s.init(l,i)},clone:function(){var t=r.clone.call(this);return t._data=this._data.clone(),t},_minBufferSize:0});a.Hasher=u.extend({cfg:r.extend(),init:function(t){this.cfg=this.cfg.extend(t),this.reset()},reset:function(){u.reset.call(this),this._doReset()},update:function(t){return this._append(t),this._process(),this},finalize:function(t){return t&&this._append(t),this._doFinalize()},blockSize:16,_createHelper:function(t){return function(e,n){return new t.init(n).finalize(e)}},_createHmacHelper:function(t){return function(e,n){return new h.HMAC.init(t,n).finalize(e)}}});var h=n.algo={};return n}(Math);!function(t){function e(t,e,n,a,i,r,s){return((t=t+(e&n|~e&a)+i+s)<<r|t>>>32-r)+e}function n(t,e,n,a,i,r,s){return((t=t+(e&a|n&~a)+i+s)<<r|t>>>32-r)+e}function a(t,e,n,a,i,r,s){return((t=t+(e^n^a)+i+s)<<r|t>>>32-r)+e}function i(t,e,n,a,i,r,s){return((t=t+(n^(e|~a))+i+s)<<r|t>>>32-r)+e}for(var r=CryptoJS,s=(l=r.lib).WordArray,o=l.Hasher,l=r.algo,c=[],d=0;64>d;d++)c[d]=4294967296*t.abs(t.sin(d+1))|0;l=l.MD5=o.extend({_doReset:function(){this._hash=new s.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(t,r){for(var s=0;16>s;s++){var o=t[u=r+s];t[u]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8)}s=this._hash.words;var l,d,u=t[r+0],h=(o=t[r+1],t[r+2]),f=t[r+3],g=t[r+4],p=t[r+5],m=t[r+6],v=t[r+7],b=t[r+8],y=t[r+9],_=t[r+10],x=t[r+11],C=t[r+12],w=t[r+13],E=t[r+14],D=t[r+15],S=s[0],k=i(k=i(k=i(k=i(k=a(k=a(k=a(k=a(k=n(k=n(k=n(k=n(k=e(k=e(k=e(k=e(k=s[1],d=e(d=s[2],l=e(l=s[3],S=e(S,k,d,l,u,7,c[0]),k,d,o,12,c[1]),S,k,h,17,c[2]),l,S,f,22,c[3]),d=e(d,l=e(l,S=e(S,k,d,l,g,7,c[4]),k,d,p,12,c[5]),S,k,m,17,c[6]),l,S,v,22,c[7]),d=e(d,l=e(l,S=e(S,k,d,l,b,7,c[8]),k,d,y,12,c[9]),S,k,_,17,c[10]),l,S,x,22,c[11]),d=e(d,l=e(l,S=e(S,k,d,l,C,7,c[12]),k,d,w,12,c[13]),S,k,E,17,c[14]),l,S,D,22,c[15]),d=n(d,l=n(l,S=n(S,k,d,l,o,5,c[16]),k,d,m,9,c[17]),S,k,x,14,c[18]),l,S,u,20,c[19]),d=n(d,l=n(l,S=n(S,k,d,l,p,5,c[20]),k,d,_,9,c[21]),S,k,D,14,c[22]),l,S,g,20,c[23]),d=n(d,l=n(l,S=n(S,k,d,l,y,5,c[24]),k,d,E,9,c[25]),S,k,f,14,c[26]),l,S,b,20,c[27]),d=n(d,l=n(l,S=n(S,k,d,l,w,5,c[28]),k,d,h,9,c[29]),S,k,v,14,c[30]),l,S,C,20,c[31]),d=a(d,l=a(l,S=a(S,k,d,l,p,4,c[32]),k,d,b,11,c[33]),S,k,x,16,c[34]),l,S,E,23,c[35]),d=a(d,l=a(l,S=a(S,k,d,l,o,4,c[36]),k,d,g,11,c[37]),S,k,v,16,c[38]),l,S,_,23,c[39]),d=a(d,l=a(l,S=a(S,k,d,l,w,4,c[40]),k,d,u,11,c[41]),S,k,f,16,c[42]),l,S,m,23,c[43]),d=a(d,l=a(l,S=a(S,k,d,l,y,4,c[44]),k,d,C,11,c[45]),S,k,D,16,c[46]),l,S,h,23,c[47]),d=i(d,l=i(l,S=i(S,k,d,l,u,6,c[48]),k,d,v,10,c[49]),S,k,E,15,c[50]),l,S,p,21,c[51]),d=i(d,l=i(l,S=i(S,k,d,l,C,6,c[52]),k,d,f,10,c[53]),S,k,_,15,c[54]),l,S,o,21,c[55]),d=i(d,l=i(l,S=i(S,k,d,l,b,6,c[56]),k,d,D,10,c[57]),S,k,m,15,c[58]),l,S,w,21,c[59]),d=i(d,l=i(l,S=i(S,k,d,l,g,6,c[60]),k,d,x,10,c[61]),S,k,h,15,c[62]),l,S,y,21,c[63]);s[0]=s[0]+S|0,s[1]=s[1]+k|0,s[2]=s[2]+d|0,s[3]=s[3]+l|0},_doFinalize:function(){var e=this._data,n=e.words,a=8*this._nDataBytes,i=8*e.sigBytes;n[i>>>5]|=128<<24-i%32;var r=t.floor(a/4294967296);for(n[15+(i+64>>>9<<4)]=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8),n[14+(i+64>>>9<<4)]=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),e.sigBytes=4*(n.length+1),this._process(),n=(e=this._hash).words,a=0;4>a;a++)i=n[a],n[a]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8);return e},clone:function(){var t=o.clone.call(this);return t._hash=this._hash.clone(),t}}),r.MD5=o._createHelper(l),r.HmacMD5=o._createHmacHelper(l)}(Math),function(t){"use strict";"function"==typeof define&&define.amd?define(["jquery"],t):"object"==typeof module&&module.exports?module.exports=t(require("jquery")):t(window.jQuery)}(function(t){"use strict";var e,n;t.fn.ratingLocales={},t.fn.ratingThemes={},e={NAMESPACE:".rating",DEFAULT_MIN:0,DEFAULT_MAX:5,DEFAULT_STEP:.5,isEmpty:function(e,n){return null===e||void 0===e||0===e.length||n&&""===t.trim(e)},getCss:function(t,e){return t?" "+e:""},addCss:function(t,e){t.removeClass(e).addClass(e)},getDecimalPlaces:function(t){var e=(""+t).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);return e?Math.max(0,(e[1]?e[1].length:0)-(e[2]?+e[2]:0)):0},applyPrecision:function(t,e){return parseFloat(t.toFixed(e))},handler:function(t,n,a,i,r){var s=r?n:n.split(" ").join(e.NAMESPACE+" ")+e.NAMESPACE;i||t.off(s),t.on(s,a)}},(n=function(e,n){this.$element=t(e),this._init(n)}).prototype={constructor:n,_parseAttr:function(t,n){var a,i,r,s,o=this.$element,l=o.attr("type");if("range"===l||"number"===l){switch(i=n[t]||o.data(t)||o.attr(t),t){case"min":r=e.DEFAULT_MIN;break;case"max":r=e.DEFAULT_MAX;break;default:r=e.DEFAULT_STEP}a=e.isEmpty(i)?r:i,s=parseFloat(a)}else s=parseFloat(n[t]);return isNaN(s)?r:s},_parseValue:function(t){var e=parseFloat(t);return isNaN(e)&&(e=this.clearValue),!this.zeroAsNull||0!==e&&"0"!==e?e:null},_setDefault:function(t,n){e.isEmpty(this[t])&&(this[t]=n)},_initSlider:function(t){var n=this,a=n.$element.val();n.initialValue=e.isEmpty(a)?0:a,n._setDefault("min",n._parseAttr("min",t)),n._setDefault("max",n._parseAttr("max",t)),n._setDefault("step",n._parseAttr("step",t)),(isNaN(n.min)||e.isEmpty(n.min))&&(n.min=e.DEFAULT_MIN),(isNaN(n.max)||e.isEmpty(n.max))&&(n.max=e.DEFAULT_MAX),(isNaN(n.step)||e.isEmpty(n.step)||0===n.step)&&(n.step=e.DEFAULT_STEP),n.diff=n.max-n.min},_initHighlight:function(t){var e,n=this,a=n._getCaption();t||(t=n.$element.val()),e=n.getWidthFromValue(t)+"%",n.$filledStars.width(e),n.cache={caption:a,width:e,val:t}},_getContainerCss:function(){var t=this;return"rating-container"+e.getCss(t.theme,"theme-"+t.theme)+e.getCss(t.rtl,"rating-rtl")+e.getCss(t.size,"rating-"+t.size)+e.getCss(t.animate,"rating-animate")+e.getCss(t.disabled||t.readonly,"rating-disabled")+e.getCss(t.containerClass,t.containerClass)},_checkDisabled:function(){var t=this,e=t.$element,n=t.options;t.disabled=void 0===n.disabled?e.attr("disabled")||!1:n.disabled,t.readonly=void 0===n.readonly?e.attr("readonly")||!1:n.readonly,t.inactive=t.disabled||t.readonly,e.attr({disabled:t.disabled,readonly:t.readonly})},_addContent:function(t,e){var n=this.$container,a="clear"===t;return this.rtl?a?n.append(e):n.prepend(e):a?n.prepend(e):n.append(e)},_generateRating:function(){var n,a,i,r=this,s=r.$element;a=r.$container=t(document.createElement("div")).insertBefore(s),e.addCss(a,r._getContainerCss()),r.$rating=n=t(document.createElement("div")).attr("class","rating-stars").appendTo(a).append(r._getStars("empty")).append(r._getStars("filled")),r.$emptyStars=n.find(".empty-stars"),r.$filledStars=n.find(".filled-stars"),r._renderCaption(),r._renderClear(),r._initHighlight(),a.append(s),r.rtl&&(i=Math.max(r.$emptyStars.outerWidth(),r.$filledStars.outerWidth()),r.$emptyStars.width(i)),s.appendTo(n)},_getCaption:function(){return this.$caption&&this.$caption.length?this.$caption.html():this.defaultCaption},_setCaption:function(t){this.$caption&&this.$caption.length&&this.$caption.html(t)},_renderCaption:function(){var n,a=this,i=a.$element.val(),r=a.captionElement?t(a.captionElement):"";if(a.showCaption){if(n=a.fetchCaption(i),r&&r.length)return e.addCss(r,"caption"),r.html(n),void(a.$caption=r);a._addContent("caption",'<div class="caption">'+n+"</div>"),a.$caption=a.$container.find(".caption")}},_renderClear:function(){var n,a=this,i=a.clearElement?t(a.clearElement):"";if(a.showClear){if(n=a._getClearClass(),i.length)return e.addCss(i,n),i.attr({title:a.clearButtonTitle}).html(a.clearButton),void(a.$clear=i);a._addContent("clear",'<div class="'+n+'" title="'+a.clearButtonTitle+'">'+a.clearButton+"</div>"),a.$clear=a.$container.find("."+a.clearButtonBaseClass)}},_getClearClass:function(){return this.clearButtonBaseClass+" "+(this.inactive?"":this.clearButtonActiveClass)},_toggleHover:function(t){var e,n,a,i=this;t&&(i.hoverChangeStars&&(e=i.getWidthFromValue(i.clearValue),n=t.val<=i.clearValue?e+"%":t.width,i.$filledStars.css("width",n)),i.hoverChangeCaption&&((a=t.val<=i.clearValue?i.fetchCaption(i.clearValue):t.caption)&&i._setCaption(a+"")))},_init:function(e){var n,a=this,i=a.$element.addClass("rating-input");return a.options=e,t.each(e,function(t,e){a[t]=e}),(a.rtl||"rtl"===i.attr("dir"))&&(a.rtl=!0,i.attr("dir","rtl")),a.starClicked=!1,a.clearClicked=!1,a._initSlider(e),a._checkDisabled(),a.displayOnly&&(a.inactive=!0,a.showClear=!1,a.showCaption=!1),a._generateRating(),a._initEvents(),a._listen(),n=a._parseValue(i.val()),i.val(n),i.removeClass("rating-loading")},_initEvents:function(){var t=this;t.events={_getTouchPosition:function(n){return(e.isEmpty(n.pageX)?n.originalEvent.touches[0].pageX:n.pageX)-t.$rating.offset().left},_listenClick:function(t,e){return t.stopPropagation(),t.preventDefault(),!0!==t.handled&&(e(t),void(t.handled=!0))},_noMouseAction:function(e){return!t.hoverEnabled||t.inactive||e&&e.isDefaultPrevented()},initTouch:function(n){var a,i,r,s,o,l,c,d,u=t.clearValue||0;("ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch)&&!t.inactive&&(a=n.originalEvent,i=e.isEmpty(a.touches)?a.changedTouches:a.touches,r=t.events._getTouchPosition(i[0]),"touchend"===n.type?(t._setStars(r),d=[t.$element.val(),t._getCaption()],t.$element.trigger("change").trigger("rating:change",d),t.starClicked=!0):(o=(s=t.calculate(r)).val<=u?t.fetchCaption(u):s.caption,l=t.getWidthFromValue(u),c=s.val<=u?l+"%":s.width,t._setCaption(o),t.$filledStars.css("width",c)))},starClick:function(e){var n,a;t.events._listenClick(e,function(e){return!t.inactive&&(n=t.events._getTouchPosition(e),t._setStars(n),a=[t.$element.val(),t._getCaption()],t.$element.trigger("change").trigger("rating:change",a),void(t.starClicked=!0))})},clearClick:function(e){t.events._listenClick(e,function(){t.inactive||(t.clear(),t.clearClicked=!0)})},starMouseMove:function(e){var n,a;t.events._noMouseAction(e)||(t.starClicked=!1,n=t.events._getTouchPosition(e),a=t.calculate(n),t._toggleHover(a),t.$element.trigger("rating:hover",[a.val,a.caption,"stars"]))},starMouseLeave:function(e){var n;t.events._noMouseAction(e)||t.starClicked||(n=t.cache,t._toggleHover(n),t.$element.trigger("rating:hoverleave",["stars"]))},clearMouseMove:function(e){var n,a,i;!t.events._noMouseAction(e)&&t.hoverOnClear&&(t.clearClicked=!1,n='<span class="'+t.clearCaptionClass+'">'+t.clearCaption+"</span>",a=t.clearValue,i={caption:n,width:t.getWidthFromValue(a)||0,val:a},t._toggleHover(i),t.$element.trigger("rating:hover",[a,n,"clear"]))},clearMouseLeave:function(e){var n;t.events._noMouseAction(e)||t.clearClicked||!t.hoverOnClear||(n=t.cache,t._toggleHover(n),t.$element.trigger("rating:hoverleave",["clear"]))},resetForm:function(e){e&&e.isDefaultPrevented()||t.inactive||t.reset()}}},_listen:function(){var n=this,a=n.$element,i=a.closest("form"),r=n.$rating,s=n.$clear,o=n.events;return e.handler(r,"touchstart touchmove touchend",t.proxy(o.initTouch,n)),e.handler(r,"click touchstart",t.proxy(o.starClick,n)),e.handler(r,"mousemove",t.proxy(o.starMouseMove,n)),e.handler(r,"mouseleave",t.proxy(o.starMouseLeave,n)),n.showClear&&s.length&&(e.handler(s,"click touchstart",t.proxy(o.clearClick,n)),e.handler(s,"mousemove",t.proxy(o.clearMouseMove,n)),e.handler(s,"mouseleave",t.proxy(o.clearMouseLeave,n))),i.length&&e.handler(i,"reset",t.proxy(o.resetForm,n),!0),a},_getStars:function(t){var e,n='<span class="'+t+'-stars">';for(e=1;e<=this.stars;e++)n+='<span class="star">'+this[t+"Star"]+"</span>";return n+"</span>"},_setStars:function(t){var e=this,n=arguments.length?e.calculate(t):e.calculate(),a=e.$element,i=e._parseValue(n.val);return a.val(i),e.$filledStars.css("width",n.width),e._setCaption(n.caption),e.cache=n,a},showStars:function(t){var e=this._parseValue(t);return this.$element.val(e),this._setStars()},calculate:function(t){var n=this,a=e.isEmpty(n.$element.val())?0:n.$element.val(),i=arguments.length?n.getValueFromPosition(t):a,r=n.fetchCaption(i),s=n.getWidthFromValue(i);return{caption:r,width:s+="%",val:i}},getValueFromPosition:function(t){var n,a,i=this,r=e.getDecimalPlaces(i.step),s=i.$rating.width();return a=i.diff*t/(s*i.step),a=i.rtl?Math.floor(a):Math.ceil(a),n=e.applyPrecision(parseFloat(i.min+a*i.step),r),n=Math.max(Math.min(n,i.max),i.min),i.rtl?i.max-n:n},getWidthFromValue:function(t){var e,n,a=this.min,i=this.max,r=this.$emptyStars;return!t||a>=t||a===i?0:(e=(n=r.outerWidth())?r.width()/n:1,t>=i?100:(t-a)*e*100/(i-a))},fetchCaption:function(t){var n,a,i,r=this,s=parseFloat(t)||r.clearValue,o=r.starCaptions,l=r.starCaptionClasses;return s&&s!==r.clearValue&&(s=e.applyPrecision(s,e.getDecimalPlaces(r.step))),i="function"==typeof l?l(s):l[s],a="function"==typeof o?o(s):o[s],n=e.isEmpty(a)?r.defaultCaption.replace(/\{rating}/g,s):a,'<span class="'+(e.isEmpty(i)?r.clearCaptionClass:i)+'">'+(s===r.clearValue?r.clearCaption:n)+"</span>"},destroy:function(){var n=this.$element;return e.isEmpty(this.$container)||this.$container.before(n).remove(),t.removeData(n.get(0)),n.off("rating").removeClass("rating rating-input")},create:function(t){var e=t||this.options||{};return this.destroy().rating(e)},clear:function(){var t=this,e='<span class="'+t.clearCaptionClass+'">'+t.clearCaption+"</span>";return t.inactive||t._setCaption(e),t.showStars(t.clearValue).trigger("change").trigger("rating:clear")},reset:function(){return this.showStars(this.initialValue).trigger("rating:reset")},update:function(t){return arguments.length?this.showStars(t):this.$element},refresh:function(e){var n=this.$element;return e?this.destroy().rating(t.extend(!0,this.options,e)).trigger("rating:refresh"):n}},t.fn.rating=function(a){var i=Array.apply(null,arguments),r=[];switch(i.shift(),this.each(function(){var s,o=t(this),l=o.data("rating"),c="object"==typeof a&&a,d=c.theme||o.data("theme"),u=c.language||o.data("language")||"en",h={},f={};l||(d&&(h=t.fn.ratingThemes[d]||{}),"en"===u||e.isEmpty(t.fn.ratingLocales[u])||(f=t.fn.ratingLocales[u]),s=t.extend(!0,{},t.fn.rating.defaults,h,t.fn.ratingLocales.en,f,c,o.data()),l=new n(this,s),o.data("rating",l)),"string"==typeof a&&r.push(l[a].apply(l,i))}),r.length){case 0:return this;case 1:return void 0===r[0]?this:r[0];default:return r}},t.fn.rating.defaults={theme:"",language:"en",stars:5,filledStar:'<i class="glyphicon glyphicon-star"></i>',emptyStar:'<i class="glyphicon glyphicon-star-empty"></i>',containerClass:"",size:"md",animate:!0,displayOnly:!1,rtl:!1,showClear:!0,showCaption:!0,starCaptionClasses:{.5:"label label-danger badge-danger",1:"label label-danger badge-danger",1.5:"label label-warning badge-warning",2:"label label-warning badge-warning",2.5:"label label-info badge-info",3:"label label-info badge-info",3.5:"label label-primary badge-primary",4:"label label-primary badge-primary",4.5:"label label-success badge-success",5:"label label-success badge-success"},clearButton:'<i class="glyphicon glyphicon-minus-sign"></i>',clearButtonBaseClass:"clear-rating",clearButtonActiveClass:"clear-rating-active",clearCaptionClass:"label label-default",clearValue:null,captionElement:null,clearElement:null,hoverEnabled:!0,hoverChangeCaption:!0,hoverChangeStars:!0,hoverOnClear:!0,zeroAsNull:!0},t.fn.ratingLocales.en={defaultCaption:"{rating} Stars",starCaptions:{.5:"Half Star",1:"One Star",1.5:"One & Half Star",2:"Two Stars",2.5:"Two & Half Stars",3:"Three Stars",3.5:"Three & Half Stars",4:"Four Stars",4.5:"Four & Half Stars",5:"Five Stars"},clearButtonTitle:"Clear",clearCaption:"Not Rated"},t.fn.rating.Constructor=n,t(document).ready(function(){var e=t("input.rating");e.length&&e.removeClass("rating-loading").addClass("rating-loading").rating()})});var SLOW_INTERVAL=5e3,FAST_INTERVAL=1500,xsmn={httpUrl:"",is_alert:!1,checkInterval:FAST_INTERVAL,topic:"",load_type:"html",recent_load:0,loadUrl:"",updateBlock:"",data:null,dataType:0,socket_client:null,data_md5:"a",init:function(){$.datepicker.setDefaults($.datepicker.regional.vn),$(".has_date_picker").datepicker({dateFormat:"dd-mm-yy",changeMonth:!0,changeYear:!0,showAnim:"fold",buttonText:!1,yearRange:"2002:c+1"})},initData:function(t,e){xsmn.data=JSON.parse(t),xsmn.dataType=e},load:function(t,e,n,a,i,r,s,o){xsmn.is_alert=r,xsmn.load_type=s,xsmn.topic=n,xsmn.loadUrl=e,xsmn.updateBlock=a,o&&(xsmn.recent_load=1e3*(o-36e4));(new Date).getTime();$(document).ready(function(){xsmn.loadMiennam(e,a),interval=setInterval(function(){xsmn.loadMiennam(e,a)},xsmn.checkInterval)})},isIe:function(){var t=!1,e=window.navigator.userAgent,n=e.indexOf("MSIE "),a=e.indexOf("Trident/");return(n>-1||a>-1)&&(t=!0),t},loadKetquaMiennam:function(t,e){$.ajax({type:"GET",url:-1!==t.indexOf("/ttkq")?t.replace(".html","/"+xsmn.data_md5):t,data:{},beforeSend:function(){},error:function(t,e){},success:function(t){if(""!=t)if("json"==xsmn.load_type){var n=JSON.parse(t);xsmn.generateHtml(n,e)&&(xsmn.data_md5=CryptoJS.MD5(t).toString())}else xsmn.remainInBlock(e)>(t.match(/imgloadig/g)||[]).length?(html=$.parseHTML(t),$(e+" #kq").replaceWith(html[0]),$(e+" #dd").replaceWith(html[4]),1==xsmn.is_alert&&xsmn.alertToApp()):console.log("too slow, donot update")}})},loadMiennam:function(t,e){var n=new Date;if(n.getMinutes()>10&&xsmn.isAllowLoad(e)){var a=xsmn.getStaticUrl(t)+"?t="+n.getTime();xsmn.loadKetquaMiennam(a,e)}},goToDate:function(t,e,n,a){$.ajax({type:"POST",url:"/ajax/get-url-by-date",data:{date:t,action:e,province_code:n,province_name:a},success:function(t){result=JSON.parse(t),0==result.error&&(window.location.href=result.url)}})},initSearch:function(t,e,n){$.datepicker.setDefaults($.datepicker.regional.vn),$("#searchDate").datepicker({dateFormat:"dd/mm/yy",changeMonth:!0,changeYear:!0,showAnim:"fold",buttonText:!1,yearRange:"2002:"+((new Date).getFullYear()+1),onSelect:function(a,i){var r=a.substring(0,2),s=a.substring(3,5),o=a.substring(6,10);xsmn.goToDate(r+"-"+s+"-"+o,t,e,n)}})},getStaticUrl:function(t){return id=Math.floor(100*Math.random()),id1=1,id<27?id1=1:id>=27&&id<32?id1=2:id>=32&&id<37?id1=5:id>=37&&id<54?id1=3:id>=54&&id<64?id1=4:id>=64&&id<90?id1=5:id1=8,"https://s"+id1+".ketquaveso.com"+t},getWsUrl:function(t){return port=8080,id=Math.floor(8*Math.random()),0==id?t="ws://dev.xoso.me":1==id?t="ws://dev1.xoso.me":3==id?(t="ws://dev3.xoso.me",port=8082):4==id?t="ws://dev4.xoso.me":5==id&&(t="ws://dev5.xoso.me"),console.log(t+":"+port),t+":"+port},getSocketUrl:function(){id=Math.floor(100*Math.random());var t="https://dev1.xoso.me:5981";return id<=50&&(t="https://p1.xoso.me:5981"),t},remainInBlock:function(t){return $(t+" .imgloadig").length},isAllowLoad:function(t){return $(t+" .imgloadig").length>0||$(t+" .imgloadig").length>0},alertToApp:function(){window.location="app:webToNativeCall"},generateHtml:function(t,e){var n="",a="",i=!1;return t.hasOwnProperty("lotData")?xsmn.recent_load<t.resultDate&&(xsmn.recent_load=t.resultDate,xsmn.data=t,t.hasOwnProperty("isRolling")?(xsmn.checkInterval=1==t.isRolling?FAST_INTERVAL:SLOW_INTERVAL,clearInterval(interval),interval=setInterval(function(){xsmn.loadMiennam(xsmn.loadUrl,xsmn.updateBlock)},xsmn.checkInterval)):xsmn.checkInterval==SLOW_INTERVAL&&(xsmn.checkInterval=FAST_INTERVAL,clearInterval(interval),interval=setInterval(function(){xsmn.loadMiennam(xsmn.loadUrl,xsmn.updateBlock)},xsmn.checkInterval)),i=!0,"MB"==t.provinceCode?(n=xsmn.drawMb(t),a=xsmn.drawMbLoto(t)):(n=xsmn.drawProvince(t),a=xsmn.drawMbLoto(t))):(t.forEach(function(t){xsmn.recent_load<t.resultDate&&(i=!0,xsmn.recent_load=t.resultDate)}),1==i&&(xsmn.data=t,t[0].hasOwnProperty("isRolling")?(xsmn.checkInterval=SLOW_INTERVAL,t.forEach(function(t){1==t.isRolling&&(xsmn.checkInterval=FAST_INTERVAL)}),console.log(xsmn.checkInterval),clearInterval(interval),interval=setInterval(function(){xsmn.loadMiennam(xsmn.loadUrl,xsmn.updateBlock)},xsmn.checkInterval)):xsmn.checkInterval==SLOW_INTERVAL&&(xsmn.checkInterval=FAST_INTERVAL,clearInterval(interval),interval=setInterval(function(){xsmn.loadMiennam(xsmn.loadUrl,xsmn.updateBlock)},xsmn.checkInterval)),a=xsmn.drawRegionLoto(t),n=xsmn.drawRegion(t))),i?($(e+" #kq table tbody").replaceWith(n),$(e+" #dd").replaceWith(a),xsmn.refreshCtrlPanel(document.querySelector(e+" #kq table")),console.log("updated")):console.log("dont update"),i},getLastValProvince:function(t){for(var e="",n=8;n>0;n--)t[n].forEach(function(t){e=""!=t?t:e});if(""==(e=""!=t.DB?t.DB:e))return t;var a={};t.DB==e?(a.DB=['<span class="clnote">'+t.DB+"</span>"],e=""):a.DB=t.DB;for(n=1;n<9;n++)a[n]=[],t[n].forEach(function(t){t.trim()==e.trim()&&(t='<span class="clnote">'+t+"</span>"),a[n].push(t)});return a},getLastValMb:function(t){for(var e="",n=1;n<8;n++)t[n].forEach(function(t){e=""!=t?t:e});if(""==(e=""!=t.DB?t.DB:e))return t;var a={};t.DB==e?(a.DB=['<span class="clnote">'+t.DB+"</span>"],e=""):a.DB=t.DB,t.hasOwnProperty("MaDb")&&(a.MaDb=t.MaDb);for(n=7;n>0;n--)a[n]=[],t[n].forEach(function(t){t.trim()==e.trim()&&(t='<span class="clnote">'+t+"</span>"),a[n].push(t)});return a},drawMb:function(t){var e=t.lotData;e=xsmn.getLastValMb(e);var n="<tbody>";return n+='<tr class=\'madb\'><td colspan="12" class="">Ký hiệu trúng ĐB:',console.log(e),e.hasOwnProperty("MaDb")&&(console.log("has madb"),e.MaDb.forEach(function(t){n+=" <b"+(""==t?" class=''>":">"+t)+"</b> -"}),n.endsWith(" -")&&(n=n.substr(0,n.length-2))),n+="</td></tr>",n+="<tr class='db'><td class='txt-giai'>Đặc biệt</td><td colspan='12' class='number'><b"+(""==e.DB?" class='imgloadig'>":">"+e.DB)+"</b></td></tr>",n+="<tr class='bg_f6'><td class='txt-giai'>Giải nhất</td><td colspan='12' class='number'><b"+(""==e[1]?" class='imgloadig'>":">"+e[1])+"</b></td></tr>",n+="<tr><td class='txt-giai'>Giải nhì </td>",e[2].forEach(function(t){n+="<td colspan='6' class='number'><b"+(""==t?" class='imgloadig'>":">"+t)+"</b></td>"}),n+="</tr><tr class='giai3 bg_ef'><td class='txt-giai' rowspan='2'>Giải ba</td>",e[3].slice(0,3).forEach(function(t){n+="<td class='number' colspan='4'><b"+(""==t?" class='imgloadig'>":">"+t)+"</b></td>"}),n+="</tr><tr class='bg_ef'>",e[3].slice(3,6).forEach(function(t){n+="<td class='number' colspan='4'><b"+(""==t?" class='imgloadig'>":">"+t)+"</b></td>"}),n+="</tr><tr><td class='txt-giai'>Giải tư</td>",e[4].forEach(function(t){n+="<td class='number' colspan='3'><b"+(""==t?" class='imgloadig'>":">"+t)+"</b></td>"}),n+="</tr><tr class='giai5 bg_ef'><td class='txt-giai' rowspan='2'>Giải năm</td>",e[5].slice(0,3).forEach(function(t){n+="<td class='number' colspan='4'><b"+(""==t?" class='imgloadig'>":">"+t)+"</b></td>"}),n+="</tr><tr class='bg_ef'>",e[5].slice(3,6).forEach(function(t){n+="<td class='number' colspan='4'><b"+(""==t?" class='imgloadig'>":">"+t)+"</b></td>"}),n+="</tr><tr><td class='txt-giai'>Giải sáu</td>",e[6].forEach(function(t){n+="<td class='number' colspan='4'><b"+(""==t?" class='imgloadig'>":">"+t)+"</b></td>"}),n+="</tr><tr class='bg_ef'><td class='txt-giai'>Giải bảy</td>",e[7].forEach(function(t){n+="<td class='number' colspan='3'><b"+(""==t?" class='imgloadig'>":">"+t)+"</b></td>"}),n+="</tr></tbody>"},drawMbLoto:function(t){for(var e=t.lotData.DB+"",n=[],a=[],i=0;i<10;i++)n[i+""]=[],a[i+""]=[];for(var r in t.lotData)t.lotData.hasOwnProperty(r)&&"MaDb"!=r&&t.lotData[r].forEach(function(t){""!=t&&(n[t.slice(-2,-1)].push(t.slice(-1)),a[t.slice(-1)].push(t.slice(-2,-1)))});t.dau=n,t.duoi=a;var s=""==e?"":e.slice(-2),o=""==s?"":s.slice(-1),l="<div id='dd' class='col-firstlast'><table class='firstlast-mb fl' border='0' cellpadding='0' cellspacing='0'><tbody><tr class='header'><th>Đầu</th><th>Đuôi</th></tr>";for(i=0;i<10;i++){l+="<tr><td><b class='clnote'>"+i+"</b></td><td>";var c="";t.dau[i].forEach(function(t){c+=","+(""!=t&&t==o&&i==s?"<span class='clnote'>"+t+"</span>":t)}),l+=(""!=c?c.substring(1):"")+"</td></tr>"}l+="</tbody></table><table cellspacing='0' cellpadding='0' border='0' class='firstlast-mb fr'><tbody><tr class='header'><th>Đầu</th><th>Đuôi</th></tr>";for(i=0;i<10;i++){l+="<tr><td>";c="";t.duoi[i+""].forEach(function(t){c+=","+(""!=t&&t==s&&i==o?"<span class='clnote'>"+t+"</span>":t)}),l+=(""!=c?c.substring(1):"")+"</td><td><b class='clnote'>"+i+"</b></td></tr>"}return l+="</tbody></table></div>"},drawProvince:function(t){var e=t.lotData;e=xsmn.getLastValProvince(e);var n="<tbody>";return n+="<tr class='giai8'><td class='txt-giai'>Giải tám</td><td colspan='12' class='number'><b"+(""==e[8]?" class='imgloadig'>":">"+e[8])+"</b></td></tr>",n+="<tr class='bg_ef'><td class='txt-giai'>Giải bảy</td><td colspan='12' class='number'><b"+(""==e[7]?" class='imgloadig'>":">"+e[7])+"</b></td></tr>",n+="<tr><td class='txt-giai'>Giải sáu</td>",e[6].forEach(function(t){n+="<td colspan='4' class='number'><b"+(""==t?" class='imgloadig'>":">"+t)+"</b></td>"}),n+="</tr><tr class='bg_ef'><td class='txt-giai'>Giải năm</td><td colspan='12' class='number'><b"+(""==e[5]?" class='imgloadig'>":">"+e[5])+"</b></td></tr>",n+="</tr><tr class='giai4'><td rowspan='2' class='txt-giai'>Giải bốn</td>",e[4].slice(0,4).forEach(function(t){n+="<td class='number' colspan='3'><b"+(""==t?" class='imgloadig'>":">"+t)+"</b></td>"}),n+="</tr><tr>",e[4].slice(4,7).forEach(function(t){n+="<td class='number' colspan='4'><b"+(""==t?" class='imgloadig'>":">"+t)+"</b></td>"}),n+="</tr><tr class='bg_ef'><td class='txt-giai'>Giải ba</td>",e[3].forEach(function(t){n+="<td class='number' colspan='6'><b"+(""==t?" class='imgloadig'>":">"+t)+"</b></td>"}),n+="</tr><tr><td class='txt-giai'>Giải nhì</td><td colspan='12' class='number'><b"+(""==e[2]?" class='imgloadig'>":">"+e[2])+"</b></td></tr>",n+="<tr class='bg_ef'><td class='txt-giai'>Giải nhất</td><td colspan='12' class='number'><b"+(""==e[1]?" class='imgloadig'>":">"+e[1])+"</b></td></tr>",n+="<tr class='db'><td class='txt-giai'>Đặc biệt</td><td colspan='12' class='number'><b"+(""==e.DB?" class='imgloadig'>":">"+e.DB)+"</b></td></tr>",n+="</tbody>"},drawRegion:function(t){for(var e=Object.keys(t).length,n=0;n<e;n++)t[n].lotData=xsmn.getLastValProvince(t[n].lotData);var a="<tbody><tr class='gr-yellow'><th class='first'></th>";return t.forEach(function(t){a+="<th><b>"+t.provinceName+"</b><br /><span class='s12'>Mã: "+t.provinceCode+"</span></th>"}),a+="</tr><tr class='g8'><td>G8</td>",t.forEach(function(t){a+="<td><div"+(""==t.lotData[8]?" class='imgloadig'>":">"+t.lotData[8])+"</div></td>"}),a+="</tr><tr><td>G7</td>",t.forEach(function(t){a+="<td><div"+(""==t.lotData[7]?" class='imgloadig'>":">"+t.lotData[7])+"</div></td>"}),a+="</tr><tr><td>G6</td>",t.forEach(function(t){a+="<td>",t.lotData[6].forEach(function(t){a+="<div"+(""==t?" class='imgloadig'>":">"+t)+"</div>"}),a+="</td>"}),a+="</tr><tr><td>G5</td>",t.forEach(function(t){a+="<td><div"+(""==t.lotData[5]?" class='imgloadig'>":">"+t.lotData[5])+"</div></td>"}),a+="</tr><tr><td>G4</td>",t.forEach(function(t){a+="<td>",t.lotData[4].forEach(function(t){a+="<div"+(""==t?" class='imgloadig'>":">"+t)+"</div>"}),a+="</td>"}),a+="</tr><tr><td>G3</td>",t.forEach(function(t){a+="<td>",t.lotData[3].forEach(function(t){a+="<div"+(""==t?" class='imgloadig'>":">"+t)+"</div>"}),a+="</td>"}),a+="</tr><tr><td>G2</td>",t.forEach(function(t){a+="<td><div"+(""==t.lotData[2]?" class='imgloadig'>":">"+t.lotData[2])+"</div></td>"}),a+="</tr><tr><td>G1</td>",t.forEach(function(t){a+="<td><div"+(""==t.lotData[1]?" class='imgloadig'>":">"+t.lotData[1])+"</div></td>"}),a+="</tr><tr class='gdb'><td>DB</td>",t.forEach(function(t){a+="<td><div"+(""==t.lotData.DB?" class='imgloadig'>":">"+t.lotData.DB)+"</div></td>"}),a+="</tr></tbody>"},drawRegionLoto:function(t){var e=Object.keys(t).length,n="<div id='dd' class='col-firstlast col"+(2==e?"two":3==e?"three":"four")+"city colgiai'><table class='firstlast-mn' border='0' width='100%' cellpadding='0' cellspacing='0'><tbody><tr class='header'><th width='10%' class='first'>Đầu</th>";t.forEach(function(t){n+="<th>"+t.provinceName+"</th>";var e=[],a=[],i=0;for(i=0;i<10;i++)e[i+""]=[],a[i+""]=[];for(var r in t.lotData)t.lotData.hasOwnProperty(r)&&t.lotData[r].forEach(function(t){""!=t&&(t=t.match(/\d+/g).join(),e[t.slice(-2,-1)].push(t.slice(-1)),a[t.slice(-1)].push(t.slice(-2,-1)))});t.dau=e,t.duoi=a});for(var a=0;a<10;a++)n+="</tr><tr><td><b class='clnote'>"+a+"</b></td>",t.forEach(function(t){var e="";t.dau[a].forEach(function(t){e+=","+t}),n+="<td>"+(""!=e?e.substring(1):"")+"</td>"});return n+="</tr></tbody></table></div>"},track:function(t,e,n){$.ajax({type:"POST",url:"https://api.xoso.me/tracking/index",data:{objType:t,id:e,actionType:n},error:function(t,e){},success:function(t){}})}};xsmn.addTableCtrlPanel=function(t,e){function n(t,e,n){var a=document.createElement(t.toUpperCase());if("string"==typeof e)a.className=e;else if("object"==typeof e){var i;for(i in e)e.hasOwnProperty(i)&&a.setAttribute(i,e[i])}return"string"==typeof n?a.innerHTML=n:n instanceof HTMLElement?a.appendChild(n):n instanceof Array&&function(t,e){if(!(e instanceof Array))throw TypeError();e.forEach(function(e){"string"==typeof e?t.innerHTML+=e:e instanceof HTMLElement&&t.appendChild(e)})}(a,n),a}[].forEach.call(t,function(t){var a=n("CAPTION","title",t.getAttribute("data-title")||""),i=n("SPAN","zoom-in-button",[n("I","icon zoom-in-icon"),n("SPAN")]),r=n("DIV","buttons-wrapper",[i,n("SPAN","share-button",[n("I","icon share-icon"),n("SPAN")])]),s=n("FORM","digits-form"),o=e(t);[].forEach.call(o,function(t){t.children[0]||(t.number=t.innerHTML)}),void 0===t.showedDigits&&(t.showedDigits=0),[0,2,3].forEach(function(e){var a=n("INPUT",{type:"radio",name:"showed-digits",value:e});e===t.showedDigits&&(a.checked=!0);var i=n("LABEL",{class:"radio","data-value":e},[a,n("B"),n("SPAN")]);function r(){[].forEach.call(o,function(e){e.number&&(e.innerHTML=e.number.slice(-t.showedDigits))})}a.onchange=function(){!0===a.checked&&(t.showedDigits=e,r()),parentId=t.parentNode.parentNode.getAttribute("id"),ga("send","event",parentId+":"+e,"click","xem n so cuoi")},r(),s.appendChild(i)});var l=n("DIV","control-panel",[s,r]);t.parentNode.insertBefore(l,t.nextElementSibling),t.ctrlPanel=l;var c=n("SPAN","zoom-out-button",n("I","icon zoom-out-icon")),d=function(){var e=t.clientWidth,n=t.clientHeight,a=window.innerWidth,i=window.innerHeight;t.style.transform="scale("+a/e+","+i/n+")"};i.onclick=function(){t.insertBefore(a,t.firstChild),t.classList.add("full-screen"),a.appendChild(c),d(),window.addEventListener("resize",d),t.requestFullscreen?t.requestFullscreen():t.mozRequestFullScreen?t.mozRequestFullScreen():t.webkitRequestFullscreen&&t.webkitRequestFullscreen(),ga("send","event","zoom-in-btn","click","phong to")},c.onclick=function(){t.removeChild(a),t.classList.remove("full-screen"),t.style.transform="",window.removeEventListener("resize",d),a.removeChild(c),document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen()}})},xsmn.removeTableCtrlPanel=function(t){[].forEach.call(t,function(t){t.ctrlPanel&&t.ctrlPanel.parentNode.removeChild(t.ctrlPanel)})},xsmn.refreshCtrlPanel=function(t){xsmn.removeTableCtrlPanel([t]),xsmn.addTableCtrlPanel([t],function(t){return[].filter.call(t.querySelectorAll("td, td *"),function(t){return!isNaN(t.innerHTML)})})},xsmn.addTableCtrlPanel(function(){var t=document.querySelectorAll("table.extendable");return[].forEach.call(t,function(t){t.showedDigits=0}),t}(),function(t){return[].filter.call(t.querySelectorAll("td, td *"),function(t){return!isNaN(t.innerHTML)})}),xsmn.startSocket=function(t,e,n,a){var i=xsmn.getSocketUrl();xsmn.updateBlock=n,xsmn.loadUrl=a,$(document).ready(function(){r()});var r=function(){xsmn.socket_client&&xsmn.socket_client.connected&&(xsmn.socket_client.close(),xsmn.socket_client=null,console.log("use old connection")),xsmn.socket_client=io.connect(i,{transports:["websocket"],upgrade:!1,secure:!0}),xsmn.socket_client.on("connect",function(){var t;console.log("connected "+i),(t=e)instanceof Array?t.forEach(function(t){xsmn.socket_client.emit("join_topic",{topic:t})}):xsmn.socket_client.emit("join_topic",{topic:t})}),xsmn.socket_client.on("list_topic_joined_result",function(t){console.log(JSON.stringify(t))}),xsmn.socket_client.on("connect_timeout",function(t){var e="";try{e=JSON.stringify(t)}catch(t){}console.log("connect_timeout: "+e)}),xsmn.socket_client.on("disconnect",function(t){console.log("disconnected")}),xsmn.socket_client.on("connect_error",function(t){var e="";try{e=JSON.stringify(t)}catch(t){}console.log("connect_error: "+e)}),xsmn.socket_client.on("force_reload",function(t){var n="";try{n=JSON.stringify(t)}catch(t){}ga("daily1.send","event","topic "+e,"connect_error",n),location.reload(!0)}),xsmn.socket_client.on("push_kq",function(t){console.log("push_kq",t);var e={};try{e=JSON.parse(t)}catch(n){console.log(n),e=t}if(0===xsmn.dataType)for(var n=0;n<xsmn.data.length;n++){var a=xsmn.data[n];a.provinceCode===e.provinceCode&&a.resultDate<e.resultDate&&(xsmn.data[n]=e)}else xsmn.data=e;xsmn.generateHtml(xsmn.data,xsmn.updateBlock)})}},xsmn.rating=function(t,e,n){""==e&&(e=".hdc-rating"),$.ajax({url:"/hdc/rating/get-rating",method:"get",data:{name:t,type:n},dataType:"json",success:function(a){var i=0,r=0;1==a.success&&(i=a.rating,r=a.rate_count);var s={value:i,defaultCaption:'<span itemprop="ratingValue">{rating}</span>',stars:5,min:0,max:5,step:.5,size:"xs",showClear:!1,showCaption:!1,clearCaption:"0",filledStar:'<span class="my-icon my-icon-star"></span>',emptyStar:'<span class="my-icon my-icon-star"></span>',starCaptions:{.5:"0.5",1:"1",1.5:"1.5",2:"2",2.5:"2.5",3:"3",3.5:"3.5",4:"4",4.5:"4.5",5:"5"}};$(e).rating(s),$(".rate_count_number").text(r),$(".rate_value").text(i),$(e).rating("update",i),$(e).on("rating:change",function(a,i,r){$(a.currentTarget).attr("id")==$(this).attr("id")&&$.ajax({url:"/hdc/rating/update-rating",method:"post",data:{name:t,rate:i,type:n},dataType:"json",success:function(t){1==t.success&&($(e).rating("update",t.rating),$(".rate_count_number").text(t.rate_count),$(".rate_value").text(t.rating))}})})}})};
xsmn.lazyLoad = function() {
    'use strict';
    // let active = false;

    const lz = function() {
        // if (active === false) {
        //     active = true;
        let lazyImages = [].slice.call(document.querySelectorAll("img.lazy"));
        // setTimeout(function() {
        requestAnimationFrame(function() {
            lazyImages.forEach(function(lazyImage) {
                if ((lazyImage.getBoundingClientRect().top <= window.innerHeight
                    && lazyImage.getBoundingClientRect().bottom >= 0)
                    && getComputedStyle(lazyImage).display !== "none"
                    && lazyImage.classList.contains("lazy")
                ) {
                    // console.log("calling1 : " + lazyImage.dataset.src);
                    // lazyImage.src = lazyImage.data-src;
                    lazyImage.src = lazyImage.dataset.src;
                    // lazyImage.srcset = lazyImage.dataset.srcset;
                    lazyImage.classList.remove("lazy");

                    // lazyImages = lazyImages.filter(function(image) {
                    //     return image !== lazyImage;
                    // });
                    // lazyImages = [].slice.call(document.querySelectorAll("img.lazy"));

                    // if (lazyImages.length === 0) {
                    //     document.removeEventListener("scroll", lz);
                    //     window.removeEventListener("resize", lz);
                    //     window.removeEventListener("orientationchange", lz);
                    // }
                }
            });
        });
    };

    const startLz = function() {
        lz();
        document.addEventListener("scroll", lz);
        window.addEventListener("resize", lz);
        window.addEventListener("orientationchange", lz);
    }
    document.addEventListener("DOMContentLoaded", startLz);

};
xsmn.lazyLoad();
$(".firstlast-mb td:not(first-child), .one-city td.number, .firstlast-mn td:not(first-child), .one-city td.number, .two-city td:not(.txt-giai) div, .three-city td:not(.txt-giai) div, .four-city td:not(.txt-giai) div").on("click", function() {
    $(this).toggleClass("bg-orange");
});